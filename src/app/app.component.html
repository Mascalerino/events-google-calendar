<div class="container">
  <h1 class="text-center">Eventos en Google Calendar</h1>

  <div class="row">
    <div class="col-md-12 col-sm-12 mb-3">
      <label for="calendarId">ID del Calendario:</label>
      <input
        id="calendarId"
        class="form-control"
        type="text"
        placeholder="ID del calendario"
        [(ngModel)]="calendarId"
        name="calendarId"
        required
        [ngClass]="{ 'is-invalid': !calendarId && formSubmitted }"
      />
      <div *ngIf="!calendarId && formSubmitted" class="invalid-feedback">
        Este campo es obligatorio.
      </div>
    </div>
    <div class="col-md-12 col-sm-12 mb-3">
      <label for="eventDate">Fecha del Evento:</label>
      <input
        id="eventDate"
        class="form-control"
        type="date"
        [(ngModel)]="eventDate"
        name="eventDate"
        required
        [ngClass]="{ 'is-invalid': !eventDate && formSubmitted }"
      />
      <div *ngIf="!eventDate && formSubmitted" class="invalid-feedback">
        Este campo es obligatorio.
      </div>
    </div>
    <div class="col-md-12 col-sm-12 mb-3">
      <label for="startTime">Hora de Inicio:</label>
      <input
        id="startTime"
        class="form-control"
        type="text"
        placeholder="18:00"
        [(ngModel)]="startTime"
        name="startTime"
        required
        [ngClass]="{ 'is-invalid': !isValidTime(startTime) && formSubmitted }"
        (input)="validateTime(startTime)"
      />
      <div
        *ngIf="!isValidTime(startTime) && formSubmitted"
        class="invalid-feedback"
      >
        Hora inválida. Formato esperado: HH:mm (hora entre 0-24, minutos entre
        0-59).
      </div>
    </div>

    <!-- Títulos de eventos dinámicos -->
    <div
      class="col-md-12 col-sm-12 mb-3"
      *ngFor="let title of eventTitles; let i = index"
    >
      <label for="eventTitle{{ i }}">Título del Evento {{ i + 1 }}:</label>
      <div class="input-group">
        <input
          id="eventTitle{{ i }}"
          class="form-control"
          [(ngModel)]="eventTitles[i]"
          type="text"
          placeholder="Título del evento"
          required
          [ngClass]="{ 'is-invalid': !title && formSubmitted }"
        />
        <div class="input-group-append">
          <button
            *ngIf="i === eventTitles.length - 1"
            class="btn btn-success"
            type="button"
            (click)="addTitle()"
          >
            <i class="fas fa-plus"></i>
          </button>
          <button
            *ngIf="i > 0"
            class="btn btn-danger"
            type="button"
            (click)="removeTitle(i)"
          >
            <i class="fas fa-trash"></i>
          </button>
        </div>
      </div>
      <div *ngIf="!title && formSubmitted" class="invalid-feedback">
        Este campo es obligatorio.
      </div>
    </div>
  </div>

  <div class="text-center">
    <button class="btn btn-primary mt-3" (click)="createEvent()">
      Crear Evento
    </button>
    <button class="btn btn-warning mt-3 ml-2" (click)="resetForm()">
      Limpiar
    </button>
  </div>
</div>
